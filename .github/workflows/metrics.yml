name: Generate GitHub Metrics

on:
  schedule:
    - cron: "0 0 * * *"     # Run every day at midnight
  workflow_dispatch:         # Allow manual runs
  push:
    branches: ["main", "master"]

jobs:
  github-metrics:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      # --------------------------
      # 1Ô∏è‚É£ Generate Main Metrics
      # --------------------------
      - name: Generate Main Metrics
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: Hazem-74
          template: classic
          base: header, activity, community, repositories, metadata
          config_timezone: Africa/Cairo

          # --- Languages Plugin ---
          plugin_languages: yes
          plugin_languages_limit: 8
          plugin_languages_sections: most-used
          plugin_languages_details: lines, bytes-size

      # --------------------------
      # 2Ô∏è‚É£ Generate Chess Metrics
      # --------------------------
      - name: Generate Chess Metrics
        # ‚úÖ Stable version (recommended for now)
        uses: lowlighter/metrics@latest
        with:
          filename: metrics-chess.svg
          token: ${{ secrets.METRICS_TOKEN }}
          user: Hazem-74
          template: classic
          base: ""
          config_timezone: Africa/Cairo
          debug: yes

          # --- Chess Plugin ---
          plugin_chess: yes
          plugin_chess_platform: lichess.org
          plugin_chess_user: Hazem74
          plugin_chess_token: ${{ secrets.LICHESS_TOKEN }}

      # --------------------------
      # üß™ Optional: Beta Version (uncomment to try new features)
      # --------------------------
      # - name: Generate Chess Metrics (Beta with rating chart)
      #   uses: lowlighter/metrics@beta
      #   with:
      #     filename: metrics-chess.svg
      #     token: ${{ secrets.METRICS_TOKEN }}
      #     user: Hazem-74
      #     template: classic
      #     base: ""
      #     config_timezone: Africa/Cairo
      #     debug: yes

      #     plugin_chess: yes
      #     plugin_chess_platform: lichess.org
      #     plugin_chess_user: Hazem74
      #     plugin_chess_token: ${{ secrets.LICHESS_TOKEN }}

      #     # --- New Display Options (Beta-only) ---
      #     plugin_chess_display: rating, chart
      #     plugin_chess_rating_types: bullet, blitz, rapid, classical, puzzle
      #     plugin_chess_recent_games: 5
